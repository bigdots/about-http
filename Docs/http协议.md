# http协议

> HTTP 协议用于客户端和服务器端之间的通信

请求访问文本或图像等资源的一端称为客户端，而提供资源响应的一端称为服务器端。

在两台计算机之间使用 HTTP 协议通信时，在一条通信线路上必定有一端是客户端，另一端则是服务器端。

HTTP 协议能够明确区分哪端是客户端，哪端是服务器端。

## 无状态协议

HTTP 是无状态(stateless)协议。自身不对请求和响应之间的通信状态进行保存。即它对于发送过的请求或响应都不做持久化处理。

优点：

+ 减少服务器的 CPU 及内存资源的消耗
+ 因为这种简单被应用广泛


## 使用 Cookie 的状态管理

有时需要保持状态，比如登录状态，为了实现期望的保持状态功能，于是引入了 Cookie 技术。有了 Cookie 再 用 HTTP 协议通信，就可以管理状态了。

主要操作是服务器通过 Set-Cookie 的字段，通知客户端保存Cookie。
当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入 Cookie 值。
服务器通过 Cookie 对比服务器上的记录。

## 定位资源

HTTP 协议使用 URI 定位互联网上的资源

## http方法

通过使用不同的`HTTP`方法可以实现告知服务器意图的目的。

1. GET

    获取资源。用来请求访问已被 URI 识别的资源。指定的资源经服务器端解析后返回响应内容。主要用于访问服务端资源。

2. POST

    传输请求主体。主要用于需要告诉服务端信息的时候。

3. PUT

    用来传输文件，类似于FTP。要求在请求报文的主体中包含文件内容，然后保存到请求 URI 指定的位置。

    不带验证机制，不建议使用。

4. HEAD

    获得报文首部。 不返回报文主体部分。用于确认 URI 的有效性及资源更新的日期时间等。主要用于向服务器获取资源的相关信息

5. DELETE

   删除文件。不带验证机制，不建议使用。

7. OPTIONS

    查询针对请求 URI 指定的资源支持的方法。

8. TRACE:追踪路径

    让 Web 服务器端将之前的请求通信环回给客户端的方法。 容易引发 XST(Cross-Site Tracing，跨站追踪)攻击，极少用到。

9. CONNECT:要求用隧道协议连接代理

    要求在与代理服务器通信时建立隧道，实现用隧道协议进行 TCP 通信。

## 持久连接

HTTP 协议的初始版本中，每进行一次 HTTP 通信就要断开一次 TCP 连接。

一个页面包含大量的网络资源（图片、脚本等），这样每次的请求都会造成无谓的 TCP 连接建立和断开，增加通信量的开销。

持久连接(HTTP Persistent Connections，也称为 HTTP keep-alive 或 HTTP connection reuse)。旨在建立 1 次 TCP 连接后进行多次请求和响应的交互

持久连接的特点是，只要任意 一端没有明确提出断开连接，则保持 TCP 连接状态。

在 HTTP/1.1 中，所有的连接默认都是持久连接

优点：
减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。Web 页面的显示速度也相应提高了。

## 管线化

持久连接使得多数请求以管线化(pipelining)方式发送成为可能。

管线化实现了同时并行发送多个请求，而不需要等待上一个响应的完成。